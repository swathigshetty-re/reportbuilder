<!DOCTYPE html>
<html>
<head>
<title>Add Report</title>

<style>
body{
    font-family: Arial;
    background:#f4f6f9;
    padding:30px;
}

.card{
    background:white;
    padding:20px;
    border-radius:8px;
    max-width:500px;
    margin:auto;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

input, textarea, select, button{
    width:100%;
    padding:10px;
    margin:10px 0;
}

button{
    background:#3498db;
    color:white;
    border:none;
    cursor:pointer;
}

button:hover{
    background:#2980b9;
}

#message{
    margin-top:10px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="card">
<h2>Add Report</h2>

<form id="reportForm">

<input type="text" id="title" placeholder="Project Name" required>

<textarea id="description" placeholder="Initial Comment"></textarea>

<select id="status" required>
    <option value="">-- Select Status --</option>
    <option value="Pending">Pending</option>
    <option value="In Progress">In Progress</option>
    <option value="Completed">Completed</option>
    <option value="Project Created">Project Created</option>
    <option value="On Hold">On Hold</option>
    <option value="Cancelled">Cancelled</option>
    <option value="Needs Review">Needs Review</option>
    <option value="Approved">Approved</option>
    <option value="Rejected">Rejected</option>
    <option value="Incomplete">Incomplete</option>
</select>

<button type="submit">Add Report</button>

</form>

<p id="message"></p>

</div>

<script>
document.getElementById("reportForm").addEventListener("submit", function(e){
    e.preventDefault();

    let title = document.getElementById("title").value;
    let description = document.getElementById("description").value;
    let status = document.getElementById("status").value;

    fetch("/reportbuilder/backend/reports/add.php", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            title: title,
            description: description,
            status: status
        })
    })
    .then(response => response.json())
    .then(data => {
    if (data.status === "success") {
        alert("Report added successfully!");
        window.location.href = "admin_dashboard.html";
    } else {
        document.getElementById("message").innerText = data.message;
    }
})

    .catch(error => {
        document.getElementById("message").innerText = "Error: " + error;
    });
});
</script>

</body>
</html>
